<article class="<%= item.layout %> article article-page">

  <%- partial('post/title') %>

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="<%- config.root %><%- item.path %>" rel="bookmark">
        <time class="entry-date published" datetime="<%= item.date.toDate().toISOString() %>">
          <%= item.date.format(config.date_format) %>
        </time>
      </a>
    </span>
  </div>


  <% if (item.photos && item.photos.length){ %>
    <%- partial('post/gallery') %>
  <% } %>

  <div class="article-container">

    <div class="article-main">

      <div class="article-content">
        <div class="entry">
          <% if (item.excerpt && index){ %>
            <%- item.excerpt %>
          <% } else { %>
            <%- item.content %>
          <% } %>
        </div>
        <footer class="article-footer">
            <div class="article-meta pull-left">
              <%- partial('post/category') %>
              <%- partial('post/tag') %>
            </div>
            <% if (index && (theme.duoshuo || theme.disqus)){ %>
            <div class="article-meta pull-right">
              <span>
                <i class="icon-comments"></i>
                <span>
                  <a href="<%- item.permalink %>#comment"><%- __('comment') %></a>
                </span>
              </span>
            </div>
            <% } %>
        </footer>
      </div>

    </div>

    <aside id="article-toc">
      <div class="article-toc-inner">
        <strong class="sidebar-title">Contents</strong>
        <%- toc(page.content, {
          class: 'post-toc',
          list_number: false
        }) %>
      </div>
    </aside>

  </div>

</article>

<script>
  window.onscroll = function(){
    var t = document.documentElement.scrollTop || document.body.scrollTop;
    var aside = document.getElementById("article-toc");
    if(t >= 300) {
      aside.className = "fixed";
    } else {
      aside.className = "";
    }
  }
</script>
<%- partial('comment') %>
